---
name: "Security Extended Configuration"

# CodeQL analysis configuration for Python
# Uses security-extended query suite for more comprehensive security analysis

# Enable the security-extended query suite for more security checks
extraction:
  python:
    python_setup:
      python_version: 3.11

# Disable default queries and use security-extended + security-and-quality
queries:
  - uses: security-extended
  - uses: security-and-quality
  - name: Custom security queries
    uses: ./
    with:
      severity: error

# Exclude test files from analysis
paths-ignore:
  - "**/tests/**"
  - "**/docs/**"
  - "**/.github/**"
  - "**/migrations/**"
  - "**/venv/**"
  - "**/env/**"
  - "**/.venv/**"
  - "**/node_modules/**"
  - '**/test/**'
  - '**/test_*.py'
  - '**/*_test.py'
  - '**/conftest.py'
  - '**/setup.py'

# Configure Python analysis
languages:
  python:
    # Enable additional security checks
    security-severity: high
    precision: high

# Disable some false positives
disable-default-queries: false
disable-local-queries: false

# Custom query suites
query-filters:
  - exclude:
      id:
        - "py/clear-text-logging-sensitive-data"  # Too many false positives
        - "py/weak-cryptographic-algorithm"       # We use strong algorithms

# Memory settings
# Increase memory for better performance
memory:
  queries: 4096
  database: 8192
